<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Home - Supermarket Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://unpkg.com/prop-types/prop-types.min.js"></script>
   <script src="https://unpkg.com/recharts@2.12.7/umd/Recharts.js"></script>
    <style>
        .icon { width: 20px; height: 20px; }
        .icon-lg { width: 24px; height: 24px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;
        const { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = window.Recharts;

        // Simple Icon Components
        const Icon = ({ d, className = "icon" }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                {d}
            </svg>
        );

        const Menu = () => <Icon d={<><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></>} className="icon-lg" />;
        const Search = () => <Icon d={<><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></>} className="icon" />;
        const Bell = () => <Icon d={<><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></>} className="icon-lg" />;
        const Home = () => <Icon d={<><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></>} className="icon" />;
        const Package = () => <Icon d={<><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></>} className="icon" />;
        const BarChart3 = () => <Icon d={<><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></>} className="icon" />;
        const ShoppingCart = () => <Icon d={<><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></>} className="icon" />;
        const FileText = () => <Icon d={<><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></>} className="icon" />;
        const Building2 = () => <Icon d={<><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/></>} className="icon" />;
        const Settings = () => <Icon d={<><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6"/></>} className="icon" />;
        const Download = () => <Icon d={<><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></>} className="icon-lg" />;
        const Send = () => <Icon d={<><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></>} className="icon" />;
        const Filter = () => <Icon d={<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>} className="icon" />;
        const TrendingUp = () => <Icon d={<><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></>} className="icon" />;
        const TrendingDown = () => <Icon d={<><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></>} className="icon" />;
        const AlertTriangle = () => <Icon d={<><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></>} className="icon" />;

        const generateProducts = () => {
            const categories = [
                { name: 'Groceries', count: 200, items: ['Rice', 'Flour', 'Lentils', 'Spices', 'Oil', 'Sugar', 'Salt', 'Pasta'] },
                { name: 'Dairy', count: 100, items: ['Milk', 'Cheese', 'Yogurt', 'Butter', 'Cream', 'Paneer'] },
                { name: 'Bakery', count: 80, items: ['Bread', 'Cake', 'Pastry', 'Cookie', 'Bun', 'Muffin'] },
                { name: 'Beverages', count: 150, items: ['Juice', 'Soda', 'Water', 'Tea', 'Coffee'] },
                { name: 'Frozen Foods', count: 100, items: ['Ice Cream', 'Frozen Veg', 'Ready Meal'] },
                { name: 'Personal Care', count: 120, items: ['Soap', 'Shampoo', 'Toothpaste', 'Lotion'] },
                { name: 'Household', count: 100, items: ['Detergent', 'Cleaner', 'Tissue', 'Napkin'] },
                { name: 'Snacks', count: 80, items: ['Chips', 'Chocolate', 'Nuts', 'Biscuit'] },
                { name: 'Fruits & Veg', count: 50, items: ['Apple', 'Banana', 'Orange', 'Tomato'] },
                { name: 'Meat', count: 20, items: ['Chicken', 'Mutton', 'Fish', 'Prawn'] }
            ];

            const brands = ['Premium', 'Fresh', 'Daily', 'Super', 'Best', 'Quality'];
            const products = [];
            let id = 1000;

            categories.forEach(category => {
                for (let i = 0; i < category.count; i++) {
                    const item = category.items[i % category.items.length];
                    const brand = brands[Math.floor(Math.random() * brands.length)];
                    const costPrice = Math.floor(Math.random() * 500) + 50;
                    
                    products.push({
                        id: id++,
                        sku: `SKU${id}`,
                        name: `${brand} ${item} ${i + 1}`,
                        category: category.name,
                        brand: brand,
                        costPrice: costPrice,
                        sellingPrice: costPrice + Math.floor(costPrice * 0.3),
                        unit: 'pcs',
                        reorderLevel: Math.floor(Math.random() * 50) + 20,
                        maxStock: Math.floor(Math.random() * 500) + 200,
                        supplier: `Supplier ${Math.floor(Math.random() * 20) + 1}`
                    });
                }
            });
            return products;
        };

        const generateBranchInventory = (products, branches) => {
            const inventory = {};
            branches.forEach(branch => {
                inventory[branch.id] = products.map(product => ({
                    ...product,
                    branchId: branch.id,
                    quantity: Math.floor(Math.random() * product.maxStock),
                    lastRestocked: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                }));
            });
            return inventory;
        };

        const generateSalesData = (branches) => {
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'];
            const salesData = [];
            
            months.forEach(month => {
                const dataPoint = { month };
                branches.forEach(branch => {
                    dataPoint[branch.name] = Math.floor(Math.random() * 500000) + 200000;
                });
                salesData.push(dataPoint);
            });
            return salesData;
        };

        const COLORS = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899', '#14B8A6', '#F97316'];

        function SupermarketDashboard() {
            const [sidebarOpen, setSidebarOpen] = useState(true);
            const [currentPage, setCurrentPage] = useState('dashboard');
            const [selectedBranch, setSelectedBranch] = useState('all');
            const [dateRange, setDateRange] = useState('month');
            const [searchTerm, setSearchTerm] = useState('');

            const branches = [
                { id: 1, name: 'KKLR', location: 'City Center', manager: 'John Doe', status: 'Active' },
                { id: 2, name: 'Cheyyar', location: 'North Area', manager: 'Jane Smith', status: 'Active' },
                { id: 3, name: 'Uthiramerur', location: 'East District', manager: 'Mike Johnson', status: 'Active' },
                { id: 4, name: 'Vandavasi', location: 'West Zone', manager: 'Sarah Williams', status: 'Active' },
                { id: 5, name: 'Mel', location: 'South Region', manager: 'Tom Brown', status: 'Active' }
            ];

            const products = useMemo(() => generateProducts(), []);
            const branchInventory = useMemo(() => generateBranchInventory(products, branches), [products]);
            const salesData = useMemo(() => generateSalesData(branches), []);

            const calculateMetrics = () => {
                const currentBranch = selectedBranch === 'all' ? null : branches.find(b => b.id === parseInt(selectedBranch));
                let totalStock = 0, lowStockItems = 0, totalValue = 0;

                if (currentBranch) {
                    const inventory = branchInventory[currentBranch.id];
                    inventory.forEach(item => {
                        totalStock += item.quantity;
                        if (item.quantity < item.reorderLevel) lowStockItems++;
                        totalValue += item.quantity * item.sellingPrice;
                    });
                } else {
                    Object.values(branchInventory).forEach(inventory => {
                        inventory.forEach(item => {
                            totalStock += item.quantity;
                            if (item.quantity < item.reorderLevel) lowStockItems++;
                            totalValue += item.quantity * item.sellingPrice;
                        });
                    });
                }

                const lastMonthSales = selectedBranch === 'all' 
                    ? Object.values(salesData[salesData.length - 1]).reduce((sum, val) => typeof val === 'number' ? sum + val : sum, 0)
                    : salesData[salesData.length - 1][currentBranch?.name] || 0;

                return { totalStock, lowStockItems, totalValue, lastMonthSales, branches: branches.length };
            };

            const metrics = calculateMetrics();

            const getCategorySales = () => {
                const categories = {};
                const inventory = selectedBranch === 'all' 
                    ? Object.values(branchInventory).flat()
                    : branchInventory[parseInt(selectedBranch)] || [];

                inventory.forEach(item => {
                    if (!categories[item.category]) categories[item.category] = 0;
                    categories[item.category] += item.quantity * item.sellingPrice * 0.7;
                });

                return Object.entries(categories).map(([name, value]) => ({ name, value }));
            };

            const getTopProducts = () => {
                const inventory = selectedBranch === 'all' 
                    ? Object.values(branchInventory).flat()
                    : branchInventory[parseInt(selectedBranch)] || [];

                return inventory
                    .sort((a, b) => (b.maxStock - b.quantity) - (a.maxStock - a.quantity))
                    .slice(0, 10)
                    .map(item => ({
                        name: item.name.substring(0, 15),
                        sales: (item.maxStock - item.quantity) * item.sellingPrice
                    }));
            };

            const getPurchaseRecommendations = () => {
                const inventory = selectedBranch === 'all' 
                    ? Object.values(branchInventory).flat()
                    : branchInventory[parseInt(selectedBranch)] || [];

                return inventory
                    .filter(item => item.quantity < item.reorderLevel)
                    .map(item => ({
                        ...item,
                        recommendedQty: item.maxStock - item.quantity,
                        estimatedCost: (item.maxStock - item.quantity) * item.costPrice,
                        priority: item.quantity < item.reorderLevel * 0.5 ? 'Critical' : 'High'
                    }))
                    .sort((a, b) => a.quantity - b.quantity)
                    .slice(0, 50);
            };

            const downloadReport = (format) => {
                const data = {
                    date: new Date().toLocaleDateString(),
                    branch: selectedBranch === 'all' ? 'All Branches' : branches.find(b => b.id === parseInt(selectedBranch))?.name,
                    metrics,
                    categorySales: getCategorySales()
                };

                if (format === 'json') {
                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `sales-report-${Date.now()}.json`;
                    a.click();
                } else if (format === 'csv') {
                    let csv = 'Category,Sales Value\n';
                    getCategorySales().forEach(item => csv += `${item.name},${item.value}\n`);
                    const blob = new Blob([csv], { type: 'text/csv' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `sales-report-${Date.now()}.csv`;
                    a.click();
                } else {
                    alert(`${format.toUpperCase()} download would generate a formatted report`);
                }
            };

            const sendToSupervisor = () => {
                const recommendations = getPurchaseRecommendations();
                const total = recommendations.reduce((sum, item) => sum + item.estimatedCost, 0);
                alert(`Purchase recommendation sent!\n\nItems: ${recommendations.length}\nCost: ₹${total.toLocaleString()}`);
            };

            const MetricCard = ({ title, value, change, icon: Icon, color }) => (
                <div className="bg-white rounded-lg p-6 shadow-lg">
                    <div className="flex items-start justify-between">
                        <div>
                            <p className="text-xs text-gray-500 uppercase tracking-wider mb-2">{title}</p>
                            <h3 className="text-2xl font-bold text-gray-800">{value}</h3>
                            <p className={`text-sm mt-2 ${change?.includes('+') ? 'text-green-500' : 'text-blue-500'}`}>{change}</p>
                        </div>
                        <div className={`${color} w-12 h-12 rounded-full flex items-center justify-center text-white`}>
                            <Icon />
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="flex h-screen bg-gray-100">
                    {/* Sidebar */}
                    <div className={`${sidebarOpen ? 'w-64' : 'w-0'} bg-white transition-all duration-300 overflow-hidden shadow-lg`} style={{minHeight: '100vh'}}>
                        <div className="p-6">
                            <div className="flex items-center gap-2 mb-8">
                                <div className="w-8 h-8 bg-cyan-400 rounded-lg flex items-center justify-center text-white">
                                    <Home />
                                </div>
                                <span className="text-xl font-bold text-gray-700">Happy Home</span>
                            </div>

                            <nav className="space-y-2">
                                {[
                                    { id: 'dashboard', label: 'Dashboard', icon: Home },
                                    { id: 'stock', label: 'Stock Management', icon: Package },
                                    { id: 'analytics', label: 'Sales Analytics', icon: BarChart3 },
                                    { id: 'purchase', label: 'Purchase', icon: ShoppingCart },
                                    { id: 'reports', label: 'Reports', icon: FileText },
                                    { id: 'branches', label: 'Branches', icon: Building2 },
                                    { id: 'settings', label: 'Settings', icon: Settings }
                                ].map(item => (
                                    <button
                                        key={item.id}
                                        onClick={() => setCurrentPage(item.id)}
                                        className={`w-full flex items-center gap-3 p-3 rounded-lg transition ${
                                            currentPage === item.id ? 'bg-blue-50 text-blue-600' : 'text-gray-600 hover:bg-gray-50'
                                        }`}
                                    >
                                        <item.icon />
                                        <span className="font-medium">{item.label}</span>
                                    </button>
                                ))}
                            </nav>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="flex-1 overflow-auto">
                        {/* Header */}
                        <div className="bg-gradient-to-r from-cyan-400 to-cyan-500 text-white">
                            <div className="p-6">
                                <div className="flex items-center justify-between mb-6">
                                    <div className="flex items-center gap-4">
                                        <button onClick={() => setSidebarOpen(!sidebarOpen)} className="p-2 hover:bg-cyan-600 rounded-lg">
                                            <Menu />
                                        </button>
                                        <div className="relative w-96">
                                            <div className="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">
                                                <Search />
                                            </div>
                                            <input
                                                type="text"
                                                placeholder="Search products..."
                                                className="w-full pl-12 pr-4 py-3 rounded-lg text-gray-700"
                                            />
                                        </div>
                                    </div>
                                    <div className="flex items-center gap-4">
                                        <div className="relative cursor-pointer">
                                            <Bell />
                                            <span className="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs flex items-center justify-center">
                                                {metrics.lowStockItems > 99 ? '99' : metrics.lowStockItems}
                                            </span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className="w-10 h-10 bg-white rounded-full flex items-center justify-center text-cyan-500 font-bold">JD</div>
                                            <span className="font-medium">John Doe</span>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex items-center justify-between">
                                    <div>
                                        <div className="flex items-center gap-2 text-sm mb-2 opacity-90">
                                            <Home />
                                            <span>Dashboard / </span>
                                            <span className="capitalize">{currentPage}</span>
                                        </div>
                                        <h1 className="text-3xl font-bold capitalize">{currentPage}</h1>
                                    </div>
                                    <div className="flex gap-3">
                                        <select
                                            value={selectedBranch}
                                            onChange={(e) => setSelectedBranch(e.target.value)}
                                            className="px-4 py-2 bg-white text-gray-700 rounded-lg"
                                        >
                                            <option value="all">All Branches</option>
                                            {branches.map(b => <option key={b.id} value={b.id}>{b.name}</option>)}
                                        </select>
                                        <select
                                            value={dateRange}
                                            onChange={(e) => setDateRange(e.target.value)}
                                            className="px-4 py-2 bg-white text-gray-700 rounded-lg"
                                        >
                                            <option value="today">Today</option>
                                            <option value="week">This Week</option>
                                            <option value="month">This Month</option>
                                            <option value="year">This Year</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Content */}
                        <div className="p-6">
                            {(currentPage === 'dashboard' || currentPage === 'analytics') && (
                                <>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
                                        <MetricCard title="Total Stock" value={metrics.totalStock.toLocaleString()} change="Across branches" icon={Package} color="bg-blue-500" />
                                        <MetricCard title="Low Stock" value={metrics.lowStockItems} change="Need reorder" icon={TrendingDown} color="bg-red-500" />
                                        <MetricCard title="Inventory Value" value={`₹${(metrics.totalValue/1000000).toFixed(2)}M`} change="Total worth" icon={TrendingUp} color="bg-green-500" />
                                        <MetricCard title="Sales" value={`₹${(metrics.lastMonthSales/1000000).toFixed(2)}M`} change="+12.5%" icon={BarChart3} color="bg-orange-500" />
                                        <MetricCard title="Branches" value={metrics.branches} change="All operational" icon={Building2} color="bg-purple-500" />
                                    </div>

                                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                                        <div className="lg:col-span-2 bg-white rounded-lg p-6 shadow-lg">
                                            <h3 className="text-lg font-bold mb-4">Branch Sales Comparison</h3>
                                            <ResponsiveContainer width="100%" height={300}>
                                                <LineChart data={salesData}>
                                                    <CartesianGrid strokeDasharray="3 3" />
                                                    <XAxis dataKey="month" />
                                                    <YAxis />
                                                    <Tooltip />
                                                    <Legend />
                                                    {branches.map((b, i) => <Line key={b.id} type="monotone" dataKey={b.name} stroke={COLORS[i]} />)}
                                                </LineChart>
                                            </ResponsiveContainer>
                                        </div>

                                        <div className="bg-white rounded-lg p-6 shadow-lg">
                                            <h3 className="text-lg font-bold mb-4">Category Sales</h3>
                                            <ResponsiveContainer width="100%" height={300}>
                                                <PieChart>
                                                    <Pie data={getCategorySales()} cx="50%" cy="50%" outerRadius={80} dataKey="value" label>
                                                        {getCategorySales().map((e, i) => <Cell key={i} fill={COLORS[i % COLORS.length]} />)}
                                                    </Pie>
                                                    <Tooltip />
                                                </PieChart>
                                            </ResponsiveContainer>
                                        </div>
                                    </div>

                                    <div className="bg-white rounded-lg p-6 shadow-lg">
                                        <h3 className="text-lg font-bold mb-4">Top Products</h3>
                                        <ResponsiveContainer width="100%" height={300}>
                                            <BarChart data={getTopProducts()}>
                                                <CartesianGrid strokeDasharray="3 3" />
                                                <XAxis dataKey="name" angle={-45} textAnchor="end" height={100} />
                                                <YAxis />
                                                <Tooltip />
                                                <Bar dataKey="sales" fill="#3B82F6" />
                                            </BarChart>
                                        </ResponsiveContainer>
                                    </div>
                                </>
                            )}

                            {currentPage === 'stock' && (
                                <div className="bg-white rounded-lg p-6 shadow-lg">
                                    <h3 className="text-xl font-bold mb-4">Stock Management</h3>
                                    <input
                                        type="text"
                                        placeholder="Search..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full px-4 py-2 border rounded mb-4"
                                    />
                                    <div className="overflow-x-auto">
                                        <table className="w-full">
                                            <thead className="bg-gray-50">
                                                <tr>
                                                    <th className="px-4 py-3 text-left text-xs">Product</th>
                                                    <th className="px-4 py-3 text-left text-xs">Category</th>
                                                    <th className="px-4 py-3 text-left text-xs">Stock</th>
                                                    <th className="px-4 py-3 text-left text-xs">Price</th>
                                                    <th className="px-4 py-3 text-left text-xs">Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {(selectedBranch === 'all' ? Object.values(branchInventory).flat() : branchInventory[parseInt(selectedBranch)] || [])
                                                    .filter(item => item.name.toLowerCase().includes(searchTerm.toLowerCase()))
                                                    .slice(0, 20)
                                                    .map(item => (
                                                        <tr key={`${item.id}-${item.branchId}`} className="border-t hover:bg-gray-50">
                                                            <td className="px-4 py-3 text-sm">{item.name}</td>
                                                            <td className="px-4 py-3 text-sm">{item.category}</td>
                                                            <td className="px-4 py-3 text-sm">{item.quantity}</td>
                                                            <td className="px-4 py-3 text-sm">₹{item.sellingPrice}</td>
                                                            <td className="px-4 py-3">
                                                                <span className={`px-2 py-1 text-xs rounded-full ${item.quantity < item.reorderLevel ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}`}>
                                                                    {item.quantity < item.reorderLevel ? 'Low Stock' : 'In Stock'}
                                                                </span>
                                                            </td>
                                                        </tr>
                                                    ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            )}

                            {currentPage === 'purchase' && (
                                <>
                                    <div className="bg-white rounded-lg p-6 shadow-lg mb-6">
                                        <div className="flex justify-between items-center mb-4">
                                            <h3 className="text-xl font-bold">Purchase Recommendations</h3>
                                            <button onClick={sendToSupervisor} className="px-4 py-2 bg-green-500 text-white rounded-lg flex items-center gap-2">
                                                <Send />
                                                Send to Supervisor
                                            </button>
                                        </div>
                                        <div className="grid grid-cols-3 gap-4">
                                            <div className="bg-blue-50 p-4 rounded">
                                                <p className="text-sm text-gray-600">Total Items</p>
                                                <p className="text-2xl font-bold text-blue-600">{getPurchaseRecommendations().length}</p>
                                            </div>
                                            <div className="bg-orange-50 p-4 rounded">
                                                <p className="text-sm text-gray-600">Critical</p>
                                                <p className="text-2xl font-bold text-orange-600">{getPurchaseRecommendations().filter(r => r.priority === 'Critical').length}</p>
                                            </div>
                                            <div className="bg-green-50 p-4 rounded">
                                                <p className="text-sm text-gray-600">Est. Cost</p>
                                                <p className="text-2xl font-bold text-green-600">₹{getPurchaseRecommendations().reduce((s,i) => s + i.estimatedCost, 0).toLocaleString()}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-white rounded-lg p-6 shadow-lg overflow-x-auto">
                                        <table className="w-full">
                                            <thead className="bg-gray-50">
                                                <tr>
                                                    <th className="px-4 py-3 text-left text-xs">Product</th>
                                                    <th className="px-4 py-3 text-left text-xs">Current</th>
                                                    <th className="px-4 py-3 text-left text-xs">Recommended</th>
                                                    <th className="px-4 py-3 text-left text-xs">Cost</th>
                                                    <th className="px-4 py-3 text-left text-xs">Priority</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {getPurchaseRecommendations().slice(0, 30).map(item => (
                                                    <tr key={item.id} className="border-t hover:bg-gray-50">
                                                        <td className="px-4 py-3 text-sm">{item.name}</td>
                                                        <td className="px-4 py-3 text-sm">{item.quantity}</td>
                                                        <td className="px-4 py-3 text-sm font-medium">{item.recommendedQty}</td>
                                                        <td className="px-4 py-3 text-sm">₹{item.estimatedCost.toLocaleString()}</td>
                                                        <td className="px-4 py-3">
                                                            <span className={`px-2 py-1 text-xs rounded-full ${item.priority === 'Critical' ? 'bg-red-100 text-red-800' : 'bg-orange-100 text-orange-800'}`}>
                                                                {item.priority}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </>
                            )}

                            {currentPage === 'reports' && (
                                <>
                                    <div className="bg-white rounded-lg p-6 shadow-lg mb-6">
                                        <h3 className="text-xl font-bold mb-4">Download Sales Reports</h3>
                                        <div className="grid grid-cols-4 gap-4">
                                            {['pdf', 'excel', 'csv', 'json'].map(format => (
                                                <button
                                                    key={format}
                                                    onClick={() => downloadReport(format)}
                                                    className="p-6 border-2 rounded-lg hover:border-blue-500 hover:bg-blue-50"
                                                >
                                                    <div className="flex justify-center mb-2"><Download /></div>
                                                    <h4 className="font-semibold capitalize">{format} Report</h4>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="bg-white rounded-lg p-6 shadow-lg">
                                        <h3 className="text-xl font-bold mb-4">Report Preview</h3>
                                        <div className="grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded">
                                            <div>
                                                <p className="text-sm text-gray-600">Date</p>
                                                <p className="font-semibold">{new Date().toLocaleDateString()}</p>
                                            </div>
                                            <div>
                                                <p className="text-sm text-gray-600">Branch</p>
                                                <p className="font-semibold">{selectedBranch === 'all' ? 'All Branches' : branches.find(b => b.id === parseInt(selectedBranch))?.name}</p>
                                            </div>
                                            <div>
                                                <p className="text-sm text-gray-600">Sales</p>
                                                <p className="font-semibold text-green-600">₹{(metrics.lastMonthSales/1000000).toFixed(2)}M</p>
                                            </div>
                                            <div>
                                                <p className="text-sm text-gray-600">Products</p>
                                                <p className="font-semibold">{products.length}</p>
                                            </div>
                                        </div>
                                    </div>
                                </>
                            )}

                            {currentPage === 'branches' && (
                                <div className="bg-white rounded-lg p-6 shadow-lg">
                                    <h3 className="text-xl font-bold mb-6">Branch Management</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {branches.map(branch => {
                                            const stock = branchInventory[branch.id];
                                            const totalItems = stock.reduce((s, i) => s + i.quantity, 0);
                                            const lowStock = stock.filter(i => i.quantity < i.reorderLevel).length;
                                            const value = stock.reduce((s, i) => s + (i.quantity * i.sellingPrice), 0);
                                            
                                            return (
                                                <div key={branch.id} className="border rounded-lg p-6 hover:shadow-lg">
                                                    <div className="flex justify-between mb-4">
                                                        <div>
                                                            <h4 className="text-lg font-bold">{branch.name}</h4>
                                                            <p className="text-sm text-gray-600">{branch.location}</p>
                                                        </div>
                                                        <span className="px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full h-fit">{branch.status}</span>
                                                    </div>
                                                    <div className="space-y-2 mb-4">
                                                        <div className="flex justify-between text-sm">
                                                            <span className="text-gray-600">Manager:</span>
                                                            <span className="font-medium">{branch.manager}</span>
                                                        </div>
                                                        <div className="flex justify-between text-sm">
                                                            <span className="text-gray-600">Stock:</span>
                                                            <span className="font-medium">{totalItems.toLocaleString()}</span>
                                                        </div>
                                                        <div className="flex justify-between text-sm">
                                                            <span className="text-gray-600">Low Stock:</span>
                                                            <span className="font-medium text-red-600">{lowStock}</span>
                                                        </div>
                                                        <div className="flex justify-between text-sm">
                                                            <span className="text-gray-600">Value:</span>
                                                            <span className="font-medium text-green-600">₹{(value/1000000).toFixed(2)}M</span>
                                                        </div>
                                                    </div>
                                                    <button className="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                                        View Details
                                                    </button>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            )}

                            {currentPage === 'settings' && (
                                <div className="bg-white rounded-lg p-6 shadow-lg">
                                    <h3 className="text-xl font-bold mb-4">Settings</h3>
                                    <p className="text-gray-600">Settings page coming soon...</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SupermarketDashboard />);
    </script>
</body>
</html>